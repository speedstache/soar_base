<div class="container mt-2 mb-5 pb-5">
	<% if @status.blank? %>	
		<%= render 'grid' %>
	<% else %>	
	<% end %>	
	<div class="row text-center">
		<div class="col">	
			<h4><%= current_user.username %>'s <%= @status %> reservations</h4>
		</div>
			<p class="text-muted">Today and Upcoming next 30 days.
			Reservations are past due if unpaid 5 days after flight</p>
	</div>
	<div class="row justify-content-center">
		<!-- replace table with card for upcoming reservations -->

		<% @displayreservations.each do |reservation| %>
			<div class="col-sm-10 col-md-8 ">
				<div class="card shadow p-3 mb-5 bg-white rounded">
					<div class="row p-1 card-header fst-italic">
						<div class="col text-start justify-content-start">
						<strong><%= reservation.reservation_date.strftime("%m/%d/%y") %></strong>
						</div>
						<div class="col text-center justify-content-center">
							<%= reservation.reservation_time %>
						</div>
						<div class="col text-center justify-content-center">
							<%= reservation.aircraft.short_name %>
						</div>
						<div class="col text-center justify-content-end">
							<strong>
								<% if reservation.status == 'open' && reservation.reservation_date > Date.today %>
									Upcoming
								<% elsif reservation.status == 'open' && reservation.reservation_date < 5.days.ago %>
									Payment Past Due
								<% else %>
									<%= reservation.status %> 
								<% end %>
							</strong>
						</div>
					</div>
					<div class="card-body justify-content-start">
						<p>Requires instructor: <%= reservation.instructor_flag.humanize %></p>
						<p>You flew <%= reservation.flights.count %> flights with <%= number_to_currency(reservation.flights.pluck(:fees).sum) %> in tow fees. </p>
					</div>
					<div class="row card-footer text-body-secondary">
						<div class="col input-group justify-content-start">
							<%= link_to "See Details", reservation_path(reservation), class: "btn btn-info btn-sm" %> 
						</div>
						<div class="col input-group justify-content-end">
						<% if reservation.flights.count == 0 && reservation.status == 'open' %>
							<%= link_to "Delete", reservation_path(reservation),class: "btn btn-warning btn-sm", data: {turbo_confirm: "Are you sure?", turbo_method: :delete } %>	
						<% else %>
							<%= link_to "Delete", reservation_path(reservation),class: "btn btn-warning btn-sm disabled", data: {turbo_confirm: "Are you sure?", turbo_method: :delete } %>	
						<% end %>
						</div>
					</div>
				</div>
			</div>
		<% end %>
	</div>	
</div>

		