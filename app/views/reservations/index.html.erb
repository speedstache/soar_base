<div class="mx-5 mb-5 pb-5">
<h2 class="mt-4"><%= current_user.username %> Current Reservations</h2>
<table class="table table-striped">
	<thead>
		<tr>
			<th >Username  </th>
			<th>Date  </th>
			<th>Start Time  </th>
      <th>Aircraft requested  </th>
      <th>Instructor needed  </th>
      <th>Show reservation </th>
      <th>Edit reservation  </th>
      <th>Delete reservation  </th>
		</tr>
	</thead>
		<tbody>
			<% @reservations.each do |reservation| %>
				<tr>
					<td><%= reservation.user.username %></td>
					<td><%= reservation.reservation_date.strftime("%m/%d/%y") %>  </td>
          <td><%= reservation.reservation_time %></td>
          <td><%= reservation.aircraft.name %>, <%= reservation.aircraft.short_name %>  </td>
          <td><%= reservation.instructor_flag %>  </td>
          <td><%= link_to "Reservation Details", reservation_path(reservation) %>  </td>
          <td></td>
          <td><%= link_to "Delete reservation", reservation_path(reservation), data: {turbo_confirm: "Are you sure?", turbo_method: :delete } %></td>
				</tr>
			<% end %>
		</tbody>
</table>
<%= link_to 'Add another reservation', new_reservation_path, :class => "btn btn-primary" %>
<h2 class="mt-4">All Reservations and Open Slots for <%= Date.today %></h2>
<h5 class="mt-2">Need to figure out how to move this forward and backward in time </h5>
<table class="table table-striped">
	<thead>
		<tr>
			<th >Aircraft</th>
			<% @avail_hours.each do |hour| %>
				<th><%= hour.hour %></th>
				<% end %>
		</tr>
	</thead>
	<tbody>
		<tr>
		<td>ASK-21 A</td>
		<% @avail_hours.each do |hour| %>
			<td ><% if @view_21a.where(reservation_time: hour.hour).exists? %>
					<%= link_to 'booked', reservation_path(@view_21a.where(reservation_time: hour.hour).pluck(:id)) %><% else %>
					<%= link_to 'open', new_reservation_path %><% end %></td>
		<% end %>
		</tr>
		<tr>
		<td>ASK-21 B</td>
		<% @avail_hours.each do |hour| %>
			<td ><% if @view_21b.where(reservation_time: hour.hour).exists? %>
					<%= link_to 'booked', reservation_path(@view_21b.where(reservation_time: hour.hour).pluck(:id)) %><% else %>
					<%= link_to 'open', new_reservation_path %><% end %></td>
		<% end %>
		</tr>
		<tr>
		<td>ASK-23</td>
		<% @avail_hours.each do |hour| %>
			<td ><% if @view_23.where(reservation_time: hour.hour).exists? %>
					<%= link_to 'booked', reservation_path(@view_23.where(reservation_time: hour.hour).pluck(:id)) %><% else %>
					<%= link_to 'open', new_reservation_path %><% end %></td>
		<% end %>
		</tr>



</tbody>
</table>
</div>

		